<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>시경위키</title>
    <link rel="stylesheet" href="./css/styles.css">
</head>
<body>
    <div style="margin-left: 2%;  padding: 1px;">
        <p style="font-size: 34px;"><strong>성시경</strong></p>
        <a href="https://store.steampowered.com/app/1049590/Eternal_Return/?gclid=Cj0KCQjwqP2pBhDMARIsAJQ0CzpO9zclae10IchswqWhCWYC4H6VaZml_JXU7_qWlnVy8aHEO2Uv_jsaApnDEALw_wcB"><img src="https://tpc.googlesyndication.com/simgad/2177334140893995552?sqp=4sqPyQQ7QjkqNxABHQAAtEIgASgBMAk4A0DwkwlYAWBfcAKAAQGIAQGdAQAAgD-oAQGwAYCt4gS4AV_FAS2ynT4&rs=AOga4qm0SmrtPxlUx7ZbwLpXIkwq75ZiKw"></a>
        <p style="color:rgb(228, 227, 227); background-color:  rgb(46, 46, 46); border: 1px solid white; border-radius: 4px; padding: 3px; width: 98%; height: 0 auto;">분류 : <a href="https://namu.wiki/w/%EC%84%B1%EC%8B%9C%EA%B2%BD" style="color: rgb(235, 155, 7);">성시경</a></p>
        <img><a></a></img>
    </div>
    <div>
        <div class="albumTitle">
            <img src="https://i.namu.wiki/i/rslrXPgaZNodN09voz7w_DlFb5DcGxkTS6p9oskbX_QP8ja5bsW5LrtPpuLd2MAqP0GOvnD7_KrFxbR1x7ng1gfuLVO3CNqXE9YejOvcSZdh1aRUQAloUt8B9xCyIfwIiTVr4v8seW0GJ4MOLyByXA.webp" style="height: 0 auto; width: 80%;">
        </div>
        
    </div>
    <div class="sikyungimg">
        <h2 style="text-align: center; height: 15px; padding: 0;" >성시경<br>
            <h3 style="text-align: center; height: 15px;  padding: 0;">成始璄[훈음] ｜ Sung Si Kyung</h3></h2>
        <a href="https://namu.wiki/w/%EC%84%B1%EC%8B%9C%EA%B2%BD"><img src="https://i.namu.wiki/i/s1rTzvamx_U6nXUP0OMBaXQnZEEclAvbiI9BGyetsjqxZK193y4BvP22qlGYieyBiopghTi21Bt-E1-ULAqRYSeRBGr8bvWNnLPGpR_NA7jWNLqbFZPG3vRfDxwVJmuV_o_cPnqcvIo8RUYvAkfbYA.webp"></a>
    </div>
    <section> <!-- 보통 회사에서 되어있는 구조 -->
        <nav>
            <h1 style="color: rgb(223, 220, 220); padding: 3px; margin-left: 10px;">목차</h1>
            <ul id="post-list">
                
            </ul>
        </nav>
   
        <article style="margin: 0 0 15% 15%; margin-top: 20%;"> <!-- 컨텐츠를 나타낼때 쓰임-->
             <h1>회사의위대함</h1>
             <p>우리 회사는 위대하고 위대한 회사이다.<br>
            위대함이 하늘 부끄러움 없이 위대하다.</p>
            <h2>게시글 작성</h2>
            <button id="add-post">게시글 작성</button>
            <!--
            <div id="post-form">
                <input type="text" id="post-title" placeholder="제목">
                <textarea id="post-content" placeholder="내용"></textarea>--> <!--내용적는곳에 보통 content 라고 많이씀 -->
              <!--  <button id="save-post">저장</button>
            </div>
        -->
        </article>
    </section> <!-- 세션-->
    <script>
        function displayPosts() {
            const postList = document.getElementById('post-list');
            postList.innerHTML = '';

            for (let i = 0; i < localStorage.length; i++){
                const key = localStorage.key(i);

                if (key.startsWith('post-')){
                    const post = JSON.parse(localStorage.getItem(key));
                    const listItem = document.createElement('li');
                    listItem.innerHTML = `<a href="#" date-key="${key}">${post.title}</a>`;
                    postList.appendChild(listItem);
                
                }
            }

            const postLinks = document.querySelectorAll('#post-list a');
            postLinks.forEach((link) => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();

                    const key = link.getAttribute('data-key');
                    const post = JSON.parse(localStorage.getItem(key));

                    const popupWindow = window.open('','','width=400, height=400');
                    popupWindow.document.write(`<h2>${post.title}</h2>`);
                    popupWindow.document.write(`<p>${post.content}</p>`);

                });
            });

        }

        document.getElementById('add-post').addEventListener('click', () =>{
            const popupWindow = window.open('','','width=400, height=400');
            const popupDocument = popupWindow.document;

            popupDocument.write('<h2>게시글 작성<h2>');
            popupDocument.write('<input type="text" id="post-title" placeholder="제목" style="width: 250px; height: 25px;" ><br>'); //`를 사용하지않은이유 특수문자 없어서
            popupDocument.write('<textarea id="post-content" placeholder = "내용" style="width: 250px; height: 100px;"></textarea><br>');
            popupDocument.write('<button id="save-post">저장</button>');
            
            popupDocument.getElementById('save-post').addEventListener('click', () => {

                const title = popupDocument.getElementById('post-title').value;
                const content = popupDocument.getElementById('post-content').value;

                if(title && content){

                    const postKey = `post-${Date.now()}`;
                    const post = {title,content};
                    localStorage.setItem(postKey, JSON.stringify(post));
                    displayPosts();
                    popupWindow.close();

                }


            });

        });

        displayPosts();

    </script>


</body>
<footer>
    <p> 회사소개 | 연혁 | 오시는길 | 인재채용 | 고객상담 </p>
</footer>

</html>
